<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>미세먼지 정보</title>
</head>
<body>
    <h1>현재 위치의 미세먼지 정보</h1>
    <div id="map" style="width: 500px; height: 400px;"></div>
    <div id="dust-info"></div>

    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script>
        // 카카오 지도 API 초기화
        Kakao.init('770d3a3d2219a639452acca8e59a62d4');

        // 현재 위치 가져오기
        navigator.geolocation.getCurrentPosition(function(position) {
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            // 카카오 맵 생성
            var mapContainer = document.getElementById('map');
            var mapOption = {
                center: new kakao.maps.LatLng(latitude, longitude),
                level: 5
            };
            var map = new kakao.maps.Map(mapContainer, mapOption);

            // 현재 위치에 마커 표시
            var markerPosition = new kakao.maps.LatLng(latitude, longitude);
            var marker = new kakao.maps.Marker({
                position: markerPosition
            });
            marker.setMap(map);

            // 공공데이터의 미세먼지 API 호출
            var url = 'http://openapi.airkorea.or.kr/openapi/services/rest/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty';
            url += '?serviceKey=YOUR_AIRKOREA_API_KEY';
            url += '&numOfRows=1';
            url += '&pageNo=1';
            url += '&stationName=종로구';
            url += '&dataTerm=daily';
            url += '&ver=1.3';

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    var dustInfo = data.list[0];
                    var dustHtml = `
                        <h2>미세먼지 정보</h2>
                        <p>측정시간: ${dustInfo.dataTime}</p>
                        <p>미세먼지 농도: ${dustInfo.pm10Value} µg/m³</p>
                    `;
                    document.getElementById('dust-info').innerHTML = dustHtml;
                })
                .catch(error => console.error('에러 발생:', error));
        });
    </script>
</body>
</html>
