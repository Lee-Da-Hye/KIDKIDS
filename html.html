<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="html.css">
  <style>
   .age_menu_btn {
    margin: 0 auto;
    text-align: center;
    margin: 9px;
}
.main2022_new * {
    box-sizing: border-box;
    text-decoration: none;
}
.age_menu_btn a {
    padding: 5px 50px;
    background: #000;
    color: #fff!important;
    font-weight: bold;
    display: inline-block;
    border-radius: 500px;
}
.main2022_new * {
    box-sizing: border-box;
    text-decoration: none;
}
.main_area2020 .my_menu_set_age {
    width: 336px;
}
.main_area2020 .my_menu_set_age {
    top: 317px;
}
 .my_menu_set_age {
    width: 305px;
    border: 1px solid #e6e6e6;
    z-index: 9999;
    left: 0px;
    top: 266px;
    background: #fff;
}
 .my_menu_set {
    width: 230px;
    border: 1px solid #48a801;
    position: absolute;
    overflow: hidden;
    display: none;
    z-index: 10;
    left: 0px;
}
 .my_menu_set_age h3 {
    font-size: 14px;
    line-height: 40px;
    padding: 0;
    padding-left: 15px;
    background: #35bc00;
}
 .main2022_new .my_menu_set_age h3, #main_area.main_area2020 .main2022_new .login_box_2021 #logout_box_input input {
    height: 40px;
}
 .my_menu_set_age h3 {
    height: 16px;
    padding-left: 12px;
    line-height: 9px;
    font-size: 12px;
    color: #fff;
}
 .my_menu_set_age .set_age_ul {
    padding: 0;
  }
   .my_menu_set .list {
    background-color: #FFF;
    /* padding-top: 5px;
    padding-bottom: 10px; */
}
.clearfix:before, .clearfix:after {
    content: "";
    display: block;
}
.main_area2020 .my_menu_set_age li {
    font-size: 13px;
    font-weight: 500;
}
 .my_menu_set_age li.leftbor {
    border-left: 0;
}
 .my_menu_set_age li {
    width: 111px;
}
 .my_menu_set_age li {
    float: left;
    border-left: 1px solid #e5e5e5;
    border-bottom: 1px solid #e5e5e5;
    /*width: 101px;

    font-size: 11px;
    border-right: 0;*/
}
 .my_menu_set_age li a.active {
    background: #f5f5f5;
    font-weight: bold!important;
}
.main_area2020 .my_menu .set {
    top: 14px;
}
 .my_menu .set {
    position: absolute;
    right: 10px;
    z-index: 1;
}
 .my_menu_set_age li {
    width: 111px;
    background-color: #35bc00;
}
  </style>
  
</head>
<body>

    <div id="dust" class="dust_new">
        <h1>날씨예보</h1>
        <div class="dust_new_box">
        <h2 class="my_area">지역</h2>
        <div class="dust_new_list clearfix">
        <div class="dust_new_name">
        <p class="tit">미세먼지</p>
        <p class="" id ="status"></p>
        </div>
        <img src="" class="dust_new_icon" alt=""/>
        </div>
        <div class="dust_new_list clearfix">
        <div class="dust_new_name">
        <p class="tit">오존</p>
        <p class="" id="ozone"></p>
        </div>
        <img src="" class="dust_new_icon" id="ozone_img" alt=""/>
        </div>
        </div>
        </div> 
        <!--------------------------------나만의메뉴--------------------------------------------------->
        <div id="id_my_menu_set" class="my_menu_set my_menu_set_age" >
            <h3>자주가는 메뉴 <span style="font-weight:400;">(9개 선택 후 저장)</span></h3>
            <div class="set"><a href="javascript:" onclick="_showLayer('id_my_menu_set', 'hide');"><img src="/img/main2014/my_menu_set_close.png" /></a></div>
            <ul class="list clearfix set_age_ul">
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="ep0">만 0세</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep1">만 1세</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep2">만 2세</a>
                </li>
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="ep3">만 3세</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep4">만 4세</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep5">만 5세</a>
                </li>
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="ep01">혼합 0,1세</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep12">혼합 1,2세  </a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep35">혼합 3~5세</a>
                </li>
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="ep11">시간연장(영아)  </a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep22">시간연장(유아)   </a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="ep33">방과후</a>
                </li>
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="safe">안전교육</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="gatong">가정통신문</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="mbest">이달의 추천자료</a>
                </li>
                <li class="leftbor">
                    <!--								<a href="javascript:void(0);" data-ref="nuri">누리교실</a>-->
                    <a href="javascript:void(0);" data-ref="confidence">놀이자신감</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="student">예비교사방</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="base">기본생활습관</a>
                </li>
                <li class="leftbor">
                    <a href="javascript:void(0);" data-ref="music">동요듣기</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="free">이야기마당</a>
                </li>
                <li>
                    <a href="javascript:void(0);" data-ref="myfile">함께하는 자료실</a>
                </li>
            </ul>
            <div class="age_menu_btn"><a href="javascript:void(0);" id="favor_save_btn_1801"><!--img src="/img/main2014/age_menu_btn.png" /-->저장</a></div>
        </div>
        <div class="clearfix"> <!--상단묶기-->
            <!--나만의메뉴바로가기-->
            <div id="id_my_menu_area" class="my_menu my_menu_age fleft">
                <h3><span>[2월] 교육계획안</span><!--img src="/img/main2014/age_menu_tit.png" /--></h3>
                <div class="set"><a href="javascript:" onclick="_showLayer('id_my_menu_set', 'show','','','fade');"><img src="/img/main2014/btn_set.png" /></a></div>
                <ul class="clearfix age_menu">
                    <li class="ep0"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=0">만 0세</a></li>
                    <li class="ep1"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=1" >만 1세</a></li>
                    <li class="ep2"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=2" >만 2세</a></li>
                    <li class="ep3"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=3" >만 3세</a></li>
                    <li class="ep4"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=4" >만 4세</a></li>
                    <li class="ep5"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=5" >만 5세</a></li>
                    <li class="ep01"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=91" >혼합<br/>0,1세</a></li>
                    <li class="ep12"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=92" >혼합<br/>1,2세</a></li>
                    <li class="ep35"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=93" >혼합<br/>3~5세</a></li>
                    <li class="ep11"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=96" >시간연장<br/>(영아)</a></li>
                    <li class="ep22"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=97" >시간연장<br/>(유아)</a></li>
                    <li class="ep33"><a href="//www.kidkids.net/eduinfo_new/eduplan_mon.htm?CUR_AGE=99" >방과후</a></li>
                    <li class="safe"><a href="//www.kidkids.net/eduinfo_new/safety_idx.htm" >안전교육</a></li>
                    <li class="gatong"><a href="https://iyua.kidkids.net/newsLetter/" >가정<br/>통신문</a></li>
                    <li class="mbest"><a href="//www.kidkids.net/banner/goBanner.htm?serial=13795" >이달의<br/>추천자료</a></li>
                    <li class="confidence"><a href="//www.kidkids.net/eduinfo_new/play_confidence/">놀이<br/>자신감</a></li>
                    <li class="student"><a href="//www.kidkids.net/student/" >예비<br/>교사방</a></li>
                    <li class="base"><a href="//www.kidkids.net/eduinfo_new/epgm_list.htm?cal_id=86" >기본<br/>생활습관</a></li>
                    <li class="music"><a href="javascript:popMusicPlayer();" >동요듣기</a></li>
                    <li class="free"><a href="//www.kidkids.net/ddoran/free_bbs.htm" >이야기<br/>마당</a></li>
                    <li class="myfile"><a href="//www.kidkids.net/ddoran/myfile_bbs.htm" >함께하는<br/>자료실</a></li>
                </ul>
            </div>
        </div>
    <script>
        $(document).ready(function(){

            $(".alloon_word_btn").mouseover(function(){
                $(".mouse_word").css("display", "block");
            });
            $(".alloon_word_btn").mouseout(function(){
                $(".mouse_word").css("display", "none");
            });

            $(".set_age_ul a").click(function(){
                selectMyMainMenu2(this);
            });
            $("#favor_save_btn_1801").click(function(){
                saveMyMainMenu2();
            });
            initMyMainMenu2();
        });
        function initMyMainMenu2() {
            var sDefaultMenu = 'ep0,ep1,ep2,ep3,ep4,ep5,confidence,myfile,safe';
            var aDefaultMenu = ['ep0','ep1','ep2','ep3','ep4','ep5','confidence','myfile','safe'];
            var sMyMainMenu = getCookie('my_main_menu2');

            if(sMyMainMenu == '') {
                sMyMainMenu = sDefaultMenu;
            }

            var aMyMainMenu = sMyMainMenu.split(/\,/g);
            var aMyMainMenuNew = [];
            if(aMyMainMenu.length < _nMaxMyMainMenu) {
                var nCurLen = aMyMainMenu.length;
                for(var i=0; i < _nMaxMyMainMenu - nCurLen; i++) {
                    for(var j = 0; j < aDefaultMenu.length; j++) {
                        if($.inArray(aDefaultMenu[j], aMyMainMenu) < 0) {
                            aMyMainMenu.push(aDefaultMenu[j]);
                        }
                    }
                }
            }

            _nMyMainMenu = 0;
            $('.set_age_ul a').each(function(i, obj){
                var obj = $(this);
                var sUnit = obj.attr('data-ref');

                if(_nMyMainMenu < _nMaxMyMainMenu && $.inArray(sUnit, aMyMainMenu) !== -1) {
                    _nMyMainMenu++;
                    aMyMainMenuNew.push(sUnit);
                    $('.set_age_ul a[data-ref='+sUnit+'].').addClass("active");
                    $('#id_my_menu_area li.'+ sUnit).show();
                } else {
                    $('#id_my_menu_area li.'+ sUnit).hide();
                }
            });
            sMyMainMenu = aMyMainMenuNew.join(',');
            setCookie("my_main_menu2", sMyMainMenu, 365);
        }



        function selectMyMainMenu2(obj) {
            var scnt = $(".set_age_ul a.active ").length + 1;
            var select = $(obj).attr("class");
            if(select == "active"){
                $(obj).removeClass("active");
            }else{
                if(scnt > _nMaxMyMainMenu){
                    alert("자주가는 메뉴는 "+ _nMaxMyMainMenu +"개만 선택할 수 있습니다.");
                }else{
                    $(obj).addClass("active");
                }
            }
        }
        function saveMyMainMenu2() {
            var scnt = $(".set_age_ul a.active").length
            if(scnt < _nMaxMyMainMenu) {
                alert("자주가는 메뉴 "+ _nMaxMyMainMenu +"개를 선택해 주세요.");
            } else {
                var sMyMainMenu = '';
                var aMyMainMenu = [];
                $('.set_age_ul a.active').each(function(i, obj){
                    var obj = $(this);
                    var sUnit = obj.attr('data-ref');
                    aMyMainMenu.push(sUnit);
                });
                sMyMainMenu = aMyMainMenu.join(',');
                // clear Cookie past
                setCookie("my_main_menu2", "", -1, '/','kidkids.net');
                setCookie("my_main_menu2", "", -1, '/','.kidkids.net');
                setCookie("my_main_menu2", "", -1, '/','www.kidkids.net');
                setCookie("my_main_menu2", sMyMainMenu, 365);
                _showLayer('id_my_menu_set', 'hide');
                initMyMainMenu2();
            }
        }




            $(document).ready(function(){
if (navigator.permissions && navigator.permissions.query) {
navigator.permissions.query({name: 'geolocation'}).then(function (result) {
if (result.state == 'granted') {
  function success(position) {
      console.log("1");
      var geocoder = new kakao.maps.services.Geocoder();
      var lat = position.coords.latitude, // 위도
          lon = position.coords.longitude; // 경도
      var callback = function (result, status) {
          if (status === kakao.maps.services.Status.OK) {
              var my_area = result[0]['address']['region_1depth_name'];
              if (my_area == '경기') {
                  my_area = '경기남부';
              }
              get_area(my_area);
          }
      }
      var coord = new kakao.maps.LatLng(lat, lon);
      geocoder.coord2Address(coord.getLng(), coord.getLat(), callback);

  }
  navigator.geolocation.getCurrentPosition(success);
} else{
  get_area('경기남부');
}
});
}

});
function get_area(area){
var my_area = area;
$.ajax({
type: "POST",
url : "../main_dust.php",
data: {myarea :my_area},
dataType: 'json',
success: function(json) {
$(".my_area").text(my_area);
$("#status").attr('class',json[1]);
$(".dust_new_icon").attr('src','/img/dust/dust_new_icon_'+json[1]+'.png')
$("#ozone").attr('class',json[2]);
$("#ozone_img").attr('src','/img/dust/dust_new_icon_'+json[2]+'.png')
if(json[1] =='good'){
$("#status").text('좋음');
}
if(json[1] =='normal'){
$("#status").text('보통');
}
if(json[1] =='bad'){
$("#status").text('나쁨');
}
if(json[1] =='verybad'){
$("#status").text('아주나쁨');
}
if(json[2] =='good'){
$("#ozone").text('좋음');
}
if(json[2] =='normal'){
$("#ozone").text('보통');
}
if(json[2] =='bad'){
$("#ozone").text('나쁨');
}
if(json[2] =='verybad'){
$("#ozone").text('아주나쁨');
}

}
});
}












<script>
document.addEventListener("DOMContentLoaded", function() {
    var clickedBtn = null; // 클릭된 버튼을 추적하는 변수

    // Plus 버튼 클릭 시 메뉴 보이기
    var plusBtns = document.querySelectorAll('.plus_btn');
    plusBtns.forEach(function(btn, index) {
        btn.addEventListener('click', function(e) {
            document.getElementById('id_my_menu_set').style.display = 'block';
            clickedBtn = btn; // 클릭된 버튼 업데이트
            clickedBtn.setAttribute('data-index', index.toString()); // 클릭된 버튼의 인덱스 설정
            e.preventDefault();
        });
    });

    // 메뉴 클릭 시 메뉴 숨기고 버튼 내용 업데이트하기
    var menuItems = document.querySelectorAll('#id_my_menu_set li a');
    menuItems.forEach(function(item) {
        item.addEventListener('click', function(e) {
          
            var menuName = this.innerText;
            document.getElementById('id_my_menu_set').style.display = 'none';

            if (clickedBtn && !clickedBtn.innerText.trim()) {
                clickedBtn.innerText = menuName;
                // 로컬 스토리지에 저장하기
                localStorage.setItem('plus_btn_' + clickedBtn.getAttribute('data-index'), menuName);
                e.preventDefault();
            }
            
        });
    });

    var set = document.querySelector('.set');

    set.addEventListener('click', (e)=>{
      document.getElementById('id_my_menu_set').style.display = 'none';
      e.preventDefault();
    })
    // 페이지 로드 시 로컬 스토리지에서 저장된 메뉴를 불러와 바로가기 버튼에 적용하기
    for (let i = 0; i < plusBtns.length; i++) {
        const menu = localStorage.getItem(`plus_btn_${i}`);
        if (menu) {
            plusBtns[i].innerText = menu;
        }
    }
});
</script>
    </script>
</body>
</html>